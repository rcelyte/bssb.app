{% extends "pages/game-detail.base.twig" %}

{% set gameDetailTab = "players" %}

{% block innerContent %}

    {% if players and players|length %}
        <table class="rounded-table players-table">
            <thead class="small">
            <tr>
                <th width="5"></th>
                <th width="5">#</th>
                <th class="-center" width="10">Face</th>
                <th>Name</th>
                <th>Tags</th>
                <th>Latency</th>
            </tr>
            </thead>
            <tbody>
            {% for player in players %}
                <tr>
                    <td></td>
                    <td>
                        {{ player.sortIndex }}
                    </td>
                    <td class="-center">
                        {% include "bits/face.twig" with {skinColorId: player.skinColorId, eyesId: player.eyesId} %}
                    </td>
                    <td>
                        <a href="{{ player.getProfileUrl() }}">
                            <strong>{{ player.userName }}</strong>
                        </a>
                    </td>
                    <td>
                        {% if player.isHost %}
                            <span class="badge bg-primary" data-toggle="tooltip"
                                  data-placement="bottom"
                                  title="This player is hosting the game server">
                                                        ðŸ”Œ Host</span>
                        {% endif %}
                        {% if player.userId == game.managerId %}
                            <span class="badge bg-primary" data-toggle="tooltip"
                                  data-placement="bottom"
                                  title="This player is in control of the lobby">
                                                        ðŸ‘‘ Party Leader</span>
                        {% endif %}
                        {% if player.getIsPirate() %}
                            <span class="badge bg-dark" data-toggle="tooltip"
                                  data-placement="bottom"
                                  title="This player is (most likely) a dirty stinking pirate and they aren't really trying to hide it">
                                                        â˜  Pirate</span>
                        {% endif %}
                        {% if player.getIsBot() %}
                            <span class="badge bg-success" data-toggle="tooltip"
                                  data-placement="bottom"
                                  title="This is a robot, not a real player">
                                                        ðŸ¤– Bot</span>
                        {% endif %}
                        {% if player.sortIndex < 0 %}
                            <span class="badge bg-secondary" data-toggle="tooltip"
                                  data-placement="bottom"
                                  title="This player slot is not visible in the lobby">
                                                        ðŸ‘» Ghost</span>
                        {% endif %}
                        {% if player.isAnnouncer %}
                            <span class="badge bg-success" data-toggle="tooltip"
                                  data-placement="bottom"
                                  title="This player is announcing the lobby to the Server Browser">
                                                        ðŸ“¢ Announcer</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if player.isHost %}
                            <span>Local</span>
                        {% elseif not player.isConnected %}
                            <span>Disconnected</span>
                        {% elseif not player.latency %}
                            <span>Just joined</span>
                        {% else %}
                            {{ player.describeLatency() }}
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% endif %}

{% endblock %}